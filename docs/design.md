TODO: write docs on library design